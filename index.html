<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://kit.fontawesome.com/dd1e644e27.js" crossorigin="anonymous"></script>
    <title>Show all</title>
</head>

<body>
<nav>
    <div class="container flex">
        <div class="search-bar-container active">
            <i id="magnifier" class="fa-solid fa-magnifying-glass"></i>
            <input type="text" class="input" placeholder="Search ..." />
        </div>
        <div class="counter-container">
            <i class="fa-solid fa-file-code"></i>
            <div class="counter" data-target="5"></div>
        </div>
    </div>
</nav>

<section id="projects" class="projects-section">
    <div class="projects-grid">
        <a href="https://rayholam.github.io/Dictionary/" target="_blank" class="project project-tile" id="dictionary">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/dictionary.JPG" alt="Dictionary" />
            <p class="project-title">Dictionary</p>
        </a>
        <a href="https://rayholam.github.io/Sudoku/" target="_blank" class="project project-tile" id="sudoku">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/sudoku.JPG" alt="Sudoku" />
            <p class="project-title">Sudoku</p>
        </a>
        <a href="https://rayholam.github.io/Simple-Math/" target="_blank" class="project project-tile" id="simple-math">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/simple-math.JPG" alt="Simple Math" />
            <p class="project-title">Simple Math</p>
        </a>
        <a href="https://rayholam.github.io/Crossword/" target="_blank" class="project project-tile" id="crossword">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/crossword.JPG" alt="Crossword-Game" />
            <p class="project-title">Crossword</p>
        </a>
        <a href="https://rayholam.github.io/Handover/" target="_blank" class="project project-tile" id="handover">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/Handover.JPG" alt="Handover" />
            <p class="project-title">Handover</p>
        </a>
        <a href="#" target="_blank" class="project project-tile" id="to-be-added">
            <img class="project-image" src="#" alt="to be added" />
            <p class="project-title">to be added</p>
        </a>
    </div>
</section>

<script>
const searchBarContainerEl = document.querySelector(".search-bar-container");
const magnifierEl = document.getElementById("magnifier");
const searchInputEl = document.querySelector(".input");
const projects = document.querySelectorAll(".project-title"); 

magnifierEl.addEventListener("click", (event) => {
    event.stopPropagation(); // Prevent event from bubbling up
    searchBarContainerEl.classList.toggle("active");
    if (searchBarContainerEl.classList.contains("active")) {
        searchInputEl.style.display = 'block'; 
        searchInputEl.focus(); 
    } else {
        searchInputEl.value = ''; 
        searchInputEl.style.display = 'none'; 
    }
});

document.addEventListener("click", (event) => {
    if (!searchBarContainerEl.contains(event.target) && !magnifierEl.contains(event.target)) {
        searchBarContainerEl.classList.remove("active");
        searchInputEl.value = ''; 
        searchInputEl.style.display = 'none'; 
    }
});

searchInputEl.addEventListener("keyup", (event) => {
    const query = event.target.value.toLowerCase(); 
    let found = false;

    projects.forEach(project => {
        const title = project.textContent.toLowerCase();
        const projectLink = project.closest(".project");

        if (title.includes(query) && query !== "") {
            projectLink.scrollIntoView({ behavior: "smooth", block: "center" });
            found = true;
        }
    });

    if (!found && query === "") {
        
    }
});

const counters = document.querySelectorAll('.counter');

counters.forEach(counter => {
    counter.innerText = '0';

    const updateCounter = () => {
        const target = +counter.getAttribute('data-target');
        const current = +counter.innerText;
        const increment = target / 200;

        if (current < target) {
            counter.innerText = `${Math.ceil(current + increment)}`;
            setTimeout(updateCounter, 1);
        } else {
            counter.innerText = target;
        }
    };

    updateCounter();
});
</script>
</body>

</html>
