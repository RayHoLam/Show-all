<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://kit.fontawesome.com/dd1e644e27.js" crossorigin="anonymous"></script>
    <title>Show all</title>
</head>

<body>
<nav>
    <div class="container flex">
        <div class="search-bar-container">
            <i id="magnifier" class="fa-solid fa-magnifying-glass"></i>
            <input type="text" class="input" placeholder="Search ..." />
        </div>
        <div class="counter-container">
            <i class="fa-solid fa-file-code"></i>
            <div class="counter" data-target="5"></div>
        </div>
    </div>
</nav>

<section id="projects" class="projects-section">
    <div class="projects-grid">
        <a href="https://rayholam.github.io/Dictionary/" target="_blank" class="project project-tile" id="dictionary">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/dictionary.JPG" alt="Dictionary" />
          <p><span class="project-title">Dictionary</span> This dictionary website utilizes CSS for simple layout and implements a query function using JavaScript. Users can obtain the pronunciation and Chinese meaning of words from dictionary.txt</p>
        </a>
        <a href="https://rayholam.github.io/Sudoku/" target="_blank" class="project project-tile" id="sudoku">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/sudoku.JPG" alt="Sudoku" />
            <p><span class="project-title">Sudoku</span> This Sudoku game uses the jQuery JavaScript library to randomize questions without any quantity restrictions. The challenge of the project lies in how to use CSS in conjunction with tables for layout.</p>
        </a>
        <a href="https://rayholam.github.io/Simple-Math/" target="_blank" class="project project-tile" id="simple-math">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/simple-math.JPG" alt="Simple Math" />
            <p><span class="project-title">Simple Math</span> This website uses CSS for layout and employs JavaScript to randomize the questions. It also features a scoring system that awards points for correct answers and deducts points for incorrect ones.</p>
        </a>
        <a href="https://rayholam.github.io/Crossword/" target="_blank" class="project project-tile" id="crossword">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/crossword.JPG" alt="Crossword-Game" />
            <p><span class="project-title">Crossword</span> In this Crossword website, I used modals to display questions and can check the correctness of the answers. Due to the complexity of the functionality, only one set of questions is currently available.</p>
        </a>
        <a href="https://rayholam.github.io/Handover/" target="_blank" class="project project-tile" id="handover">
            <img class="project-image" src="https://raw.githubusercontent.com/RayHoLam/My-Profile/main/Handover.JPG" alt="Handover" />
            <p><span class="project-title">Handover</span> The design of the Handover website originated from my need to pass on work details to my successor. I am most satisfied with the layout of the navigation.</p>
        </a>
        <a href="#" target="_blank" class="project project-tile" id="to-be-added">
            <img class="project-image" src="#" alt="to be added" />
            <p><span class="project-title">To be added</span> </p>
        </a>
    </div>
</section>

<script>
const searchBarContainerEl = document.querySelector(".search-bar-container");
const magnifierEl = document.getElementById("magnifier");
const searchInputEl = document.querySelector(".input");
const projects = document.querySelectorAll(".project-title");

magnifierEl.addEventListener("click", (event) => {
    event.stopPropagation();
    searchBarContainerEl.classList.toggle("active");
    if (searchBarContainerEl.classList.contains("active")) {
        searchInputEl.style.display = 'block';
        searchInputEl.focus();
    } else {
        searchInputEl.value = '';
        searchInputEl.style.display = 'none';
    }
});

document.addEventListener("click", (event) => {
    if (!searchBarContainerEl.contains(event.target) && !magnifierEl.contains(event.target)) {
        searchBarContainerEl.classList.remove("active");
        searchInputEl.value = '';
        searchInputEl.style.display = 'none';
    }
});

searchInputEl.addEventListener("keyup", (event) => {
    if (event.key === "Enter") {
        const query = event.target.value.toLowerCase();
        let found = false;

        projects.forEach(project => {
            const title = project.textContent.toLowerCase();
            const projectLink = project.closest(".project");

            if (title.includes(query) && query !== "") {
                projectLink.scrollIntoView({ behavior: "smooth", block: "center" });
                found = true;
            }
        });

        if (!found) {
            // Handle no matches, e.g. show a message
        }
    }
});

const counters = document.querySelectorAll('.counter');

counters.forEach(counter => {
    counter.innerText = '0';

    const updateCounter = () => {
        const target = +counter.getAttribute('data-target');
        const current = +counter.innerText;
        const increment = target / 200;

        if (current < target) {
            counter.innerText = `${Math.ceil(current + increment)}`;
            setTimeout(updateCounter, 1);
        } else {
            counter.innerText = target;
        }
    };

    updateCounter();
});
</script>
</body>

</html>
